<launch>

  <!-- STRETCH DRIVER -->
  <param name="/stretch_driver/broadcast_odom_tf" type="bool" value="true"/>
  <param name="/stretch_driver/fail_out_of_range_goal" type="bool" value="false"/>
  <param name="/stretch_driver/mode" type="string" value="navigation" />
  <include file="$(find stretch_core)/launch/stretch_driver.launch" pass_all_args="true"/>
  <!-- -->
    
  <!-- SQUARE PATH TESTING LAUNCH -->
  <node name="navigation_scratchpad" pkg="ifa_teamg" type="navigation_scratchpad" output="screen" args=''/>
  <!-- -->

  <!-- RPLIDAR A1 -->
  <node name="lidar_node" pkg="rplidar_ros" type="rplidarNode" output="screen">
    <param name="serial_port"         type="string" value="/dev/hello-lrf"/>
    <param name="serial_baudrate"     type="int"    value="115200"/> 
    <param name="frame_id"            type="string" value="laser"/>
    <param name="inverted"            type="bool"   value="false"/>
    <param name="angle_compensate"    type="bool"   value="true"/>
    <param name="scan_mode"           type="string" value="Boost"/>
  </node>

  <node pkg="laser_filters" type="scan_to_cloud_filter_chain"
      name="laser_to_cloud_filter">
    <rosparam ns="scan_filter_chain">

        - name: box1
          type: laser_filters/LaserScanBoxFilter
          params:
            box_frame: base_link
            min_x: -15
            max_x: 15
            min_y: 0
            max_y: 15
            min_z: -10
            max_z: 10

        - name: box2
          type: laser_filters/LaserScanBoxFilter
          params:
            box_frame: base_link
            min_x: -15
            max_x: 0
            min_y: -15
            max_y: 15
            min_z: -10
            max_z: 10

        - name: box3
          type: laser_filters/LaserScanBoxFilter
          params:
            box_frame: base_link
            min_x: 2
            max_x: 15
            min_y: -15
            max_y: 15
            min_z: -10
            max_z: 10

        - name: box4
          type: laser_filters/LaserScanBoxFilter
          params:
            box_frame: base_link
            min_x: -15
            max_x: 15
            min_y: -20
            max_y: -0.5
            min_z: -10
            max_z: 10

        - name: box5
          type: laser_filters/LaserScanBoxFilter
          params:
            box_frame: base_link
            min_x: -0.15
            max_x: -0.03
            min_y: 0
            max_y: 0.2
            min_z: -10
            max_z: 10


        - name: shadows
          type: laser_filters/ScanShadowsFilter
          params:
            min_angle: 10
            max_angle: 170
            neighbors: 20
            window: 1





    </rosparam>

    
    <remap from="scan_filtered" to="filtered_box_laser" />
    <param name="high_fidelity" value="true" />
    <param name="target_frame" type="string" value="base_link" />
    <remap from="cloud_filtered" to="laser_cloud_baselink" />

  </node>


  <!-- -->

  <!--
      "lidar supported modes
      Standard: max_distance: 12.0 m, Point number: 2.0K
      Express: max_distance: 12.0 m, Point number: 4.0K
      Boost: max_distance: 12.0 m, Point number: 8.0K"
  -->

</launch>

